import{r as c,a2 as g,a0 as p,aw as T,ax as y,L as b,j as e,ay as E,az as S,aA as D,au as I,m as C,aB as _,aC as v,aD as H}from"./index-ad7ff6c0.js";import{u as L}from"./useQuery-c0eb6096.js";import{b as V}from"./productService-74d347f4.js";import{N as q}from"./index-11f8e5a1.js";import{A as G}from"./AxiosJWTConfig-5e585da4.js";import{R as w,D as U}from"./index-2285591b.js";import{I as k}from"./index-89db27a3.js";import{I as K}from"./index-d46ac0d7.js";import{F as Q}from"./Formatter-fb77eadb.js";import{D as R}from"./index-92e0c84e.js";import{P as J}from"./Pagination-48a3fa7a.js";import{u as W}from"./use-meta-tags-afe5848c.js";import"./index-51d605d2.js";import"./LeftOutlined-a3e84758.js";import"./useForceUpdate-49e5bff7.js";import"./index-0db32b91.js";var Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM512 533c-85.5 0-155.6 67.3-160 151.6a8 8 0 008 8.4h48.1c4.2 0 7.8-3.2 8.1-7.4C420 636.1 461.5 597 512 597s92.1 39.1 95.8 88.6c.3 4.2 3.9 7.4 8.1 7.4H664a8 8 0 008-8.4C667.6 600.3 597.5 533 512 533z"}}]},name:"frown",theme:"outlined"};const X=Y;var Z=function(n,a){return c.createElement(g,p({},n,{ref:a,icon:X}))},ee=c.forwardRef(Z);const A=ee;var te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 565H360c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h304c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"meh",theme:"outlined"};const se=te;var ae=function(n,a){return c.createElement(g,p({},n,{ref:a,icon:se}))},ne=c.forwardRef(ae);const ce=ne;var re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};const ie=re;var oe=function(n,a){return c.createElement(g,p({},n,{ref:a,icon:ie}))},le=c.forwardRef(oe);const de=le;var me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};const ue=me;var he=function(n,a){return c.createElement(g,p({},n,{ref:a,icon:ue}))},xe=c.forwardRef(he);const fe=xe;var ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"};const pe=ge;var ve=function(n,a){return c.createElement(g,p({},n,{ref:a,icon:pe}))},be=c.forwardRef(ve);const z=be,$=T.getAxiosInstance(),je=G.getJWTInstance(),Ce=async(s,n=5,a=1)=>(await $.get(`/feedbacks/products/${s}?limit=${n}&page=${a}`)).data.feedbacks,ye=async s=>(await $.get(`/feedbacks/products/${s}/size`)).data.size,we=async s=>{try{const n=await je.post("/feedbacks/",s);return console.log("ADDFEDDBACK REUSLT",n),!0}catch{return!1}},Ne={1:e.jsx(A,{}),2:e.jsx(A,{}),3:e.jsx(ce,{}),4:e.jsx(z,{}),5:e.jsx(z,{})},Fe=({onSubmit:s})=>{const{user:n}=c.useContext(y),{trans:a}=c.useContext(b),[r,i]=c.useState({rate:5,content:""}),t=d=>{i(x=>({...x,rate:d}))},l=d=>{i(x=>({...x,content:d}))},f=()=>{s(r),i({rate:5,content:""})},h=(()=>{switch(r.rate){case 1:return"#FF0000";case 2:return"#FFA500";case 3:return"#FFD700";case 4:case 5:return"#4CAF50"}})(),m=(()=>{switch(r.rate){case 1:return a({en:"Very bad",vi:"Rất tệ"});case 2:return a({en:"Bad",vi:"Tệ"});case 3:return a({en:"Normal",vi:"Bình thường"});case 4:return a({en:"Good",vi:"Tốt"});case 5:return a({en:"Very good",vi:"Rất tốt"});default:return""}})();return e.jsx("div",{className:"order-1 mx-auto w-full md:order-2 col-span-12 max-w-[500px] max-h-[300px] h-fit p-4  mb-8 md:col-span-4 border rounded-md",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-semibold",children:n?n.name:a({en:"Your review",vi:"Cảm nhận của bạn"})}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(w,{allowClear:!1,defaultValue:r.rate,onChange:t,character:({index:d=0})=>Ne[d+1],style:{color:h}}),e.jsx("span",{className:"text-sm",children:m})]}),e.jsxs(E,{onFinish:f,className:"w-full",children:[e.jsx(S,{name:"feedback",rules:[{required:!0,message:a({en:"Please share your feeling a little bit...",vi:"Hãy chia sẻ một chút cảm xúc của bạn..."})}],children:e.jsx(D,{disabled:!n,showCount:!0,className:"w-full mb-4",autoSize:{minRows:2,maxRows:5},rows:2,placeholder:a({en:"Please text your feedback",vi:"Nhập bình luận của bạn..."}),maxLength:200,value:r.content,onChange:d=>l(d.target.value)})}),e.jsx(S,{children:e.jsx(I,{icon:e.jsx(fe,{}),disabled:!n,block:!0,htmlType:"submit",type:"dashed",children:a({en:"Send feedback",vi:"Gửi phản hồi"})})})]}),!n&&e.jsx("i",{className:"text-xs text-left text-red-400",children:a({en:"You must be logged in to be able to post feedback",vi:"Bạn phải đăng nhập để có thể gửi phản hồi"})})]})})},Se=({product:s,onAddItem:n})=>{const[a,r]=c.useState(0),{trans:i}=c.useContext(b),{user:t}=c.useContext(y),[l,f]=c.useState(1);return e.jsxs(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative grid grid-cols-1 gap-8 md:grid-cols-2",children:[e.jsxs("div",{className:"inline-grid grid-cols-8 gap-2 ",children:[e.jsx("div",{className:"flex flex-col w-full col-span-1 gap-4",children:s==null?void 0:s.images.map((h,m)=>e.jsx(C.img,{whileHover:{scale:1.1,rotate:5},src:h,className:`w-full object-cover ${a===m?"opacity-70":""}`,onMouseEnter:()=>r(m)},m))}),e.jsx("div",{className:"col-span-7",children:e.jsx(k,{src:s==null?void 0:s.images[a],className:"object-cover w-full",placeholder:e.jsx(k,{preview:!1,src:"https://placehold.co/600x400",width:200})})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:s.name}),e.jsx(U,{discount:s.discount,price:s.price}),e.jsxs("p",{className:"mt-4",children:[e.jsxs("span",{className:"font-semibold",children:[i({en:"Description",vi:"Mô tả"}),":",e.jsx("br",{})]}),s.description]}),e.jsxs("div",{className:"mt-10",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"mr-2 text-sm font-semibold",children:[i({en:"Quantity",vi:"Số lượng"}),":"]}),e.jsx(K,{size:"middle",min:1,max:100,defaultValue:l,onChange:h=>f(h),className:"mb-2"})]}),!t&&e.jsx("span",{className:"text-sm italic text-red-400",children:i({en:"Please log in to place an order!",vi:"Hãy đăng nhập để có thể đặt mua!"})}),e.jsx(I,{size:"large",block:!0,type:"primary",className:" bg-primary",icon:e.jsx(de,{}),disabled:!t,onClick:()=>n(l),children:i({en:"Add to cart",vi:"Thêm vào giỏ hàng"})})]})]})]},s._id)},ke=({feedback:s})=>e.jsxs("div",{className:"grid w-full grid-cols-1 p-4 border rounded-md md:grid-cols-4",children:[e.jsxs("div",{className:"flex flex-col md:col-span-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"mr-4 text-sm font-semibold",children:s.nameUser}),e.jsx("br",{}),e.jsx("span",{className:"text-xs text-gray-500",children:Q.toDateTime(s.createdAt)})]}),e.jsx(w,{value:s.rate,className:"text-sm",disabled:!0})]}),e.jsxs("div",{className:"flex gap-2 mt-1 w-fit md:col-span-3 md:mt-0",children:[e.jsx(R,{type:"vertical",className:"hidden h-full md:block"}),e.jsx("p",{className:"text-xs break-all w-fit",children:s.content})]})]},s._id),Ae=({product:s,feedbacks:n,totalFeedback:a,pageSize:r,changePage:i})=>{const{trans:t}=c.useContext(b);return console.log("render FeedbackBlock",a,r),e.jsxs("div",{className:"order-2 col-span-12 p-4 mb-4 border rounded-md md:order-1 md:col-span-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-center ",children:t({en:"Review from user",vi:"Đánh giá từ người dùng"})}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(w,{value:s.rate,disabled:!0}),e.jsxs("span",{className:"text-xs",children:["(",s.quantityRate,")"]})]}),e.jsx(R,{}),e.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[s.quantityRate==0&&e.jsxs("p",{className:"text-sm text-center text-gray-400",children:["(",e.jsx("i",{children:t({en:"There have been no responses from the user yet.",vi:"Chưa có phản hồi nào của người dùng."})}),")"]}),n&&n.map(l=>e.jsx(ke,{feedback:l},l._id)),a>r&&e.jsx("div",{className:"p-2 pb-8 mx-auto w-fit",children:e.jsx(J,{className:"p-2 bg-white border rounded-md ",total:a,defaultCurrent:1,defaultPageSize:r,onChange:l=>i(l)})})]})]})},O=10,Ge=()=>{const{id:s}=_(),[,n]=v.useMessage(),{language:a,trans:r}=c.useContext(b),{user:i}=c.useContext(y),{data:t,isLoading:l,refetch:f}=L({queryKey:["products","/id"],queryFn:()=>V(s),select:o=>o}),[h,m]=c.useState(0),[d,x]=c.useState([]),[N,F]=c.useState(1),j=c.useRef(null);W({title:t==null?void 0:t.name,description:t==null?void 0:t.description,charset:"utf8",lang:a,metas:[{name:"keywords",content:"air cooling belt, smartairconclothing, sac, sacvietnam, iuh"},{name:"robots",content:"index, follow"},{name:"url",content:`http://smartairconclothing.com/#/order/product/${s}`},{property:"fb:app_id",content:"1234567890"},{"http-equiv":"Cache-Control",content:"no-cache"}],links:[{rel:"canonical",href:"http://smartairconclothing.com"},{rel:"icon",type:"image/ico",href:"/favicon.ico"},{rel:"apple-touch-icon",sizes:"72x72",type:"image/png",href:"/apple-72.png"}],openGraph:{title:"Page Title",image:t==null?void 0:t.images[0],site_name:"My Site"},twitter:{card:"summary",creator:"@smartairconclothing",title:t==null?void 0:t.name}},[s,t]);const M=o=>{F(o),j.current&&j.current.scrollIntoView({behavior:"smooth",block:"start"})},P=async o=>{if(t&&i)try{await we({content:o.content,product_id:t._id,rate:o.rate,user_id:i._id,nameUser:i.name})?(v.success(r({en:"Feedback successfully!",vi:"Đánh giá thành công!"})),f(),F(1)):v.info(r({en:"Feedback failed!",vi:"Đánh giá thất bại!"}))}catch(u){console.log(u)}},B=o=>{t&&(H.addItemToCart(t,o),v.success(r({en:`Add ${o} item "${t.name}" to cart!`,vi:`Đã thêm ${o} sản phẩm "${t.name}" vào giỏ hàng`})))};return c.useEffect(()=>{t&&(async()=>{try{const u=await Ce(t==null?void 0:t._id,O,N);console.log("GET FEEDBACKS"),x(u)}catch{x([])}})()},[t,N]),c.useEffect(()=>{t&&(async()=>{try{const u=await ye(t==null?void 0:t._id);m(u)}catch{m(0)}})()},[t]),t?e.jsxs("div",{className:"relative ",children:[n,e.jsxs("div",{className:"max-w-screen-xl min-h-screen px-2 py-4 mx-auto mt-8",children:[e.jsx(Se,{product:t,onAddItem:B}),e.jsxs(C.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"grid grid-cols-12 gap-2 mt-4 ",ref:j,children:[e.jsx(Ae,{product:t,feedbacks:d,totalFeedback:h,pageSize:O,changePage:M}),e.jsx(Fe,{onSubmit:P})]})]})]}):e.jsx(q,{})};export{Ge as default};
