import{r as i,L as m,j as e,az as g,ay as v,x as N,ax as b,m as y}from"./index-51183d7f.js";import{F as o}from"./Formatter-fb77eadb.js";import{P as C,D as w}from"./DeleteOutlined-886d7e03.js";import{B as x}from"./button-9b5ae836.js";import{m as u}from"./index-677a26b7.js";import{E as k}from"./index-065e50bb.js";import{D}from"./index-81634cab.js";import{S as T}from"./ShoppingCartOutlined-00b4d2ef.js";import"./index-e5b4e112.js";import"./ActionButton-d7adb534.js";import"./CloseCircleFilled-aa26d74b.js";import"./compact-item-c1d3c96e.js";import"./pickAttrs-4856a254.js";class l{static calculateRealPrice(s){const a=Number(s.price),n=Number(s.discount.type==="percent"?a*Number(s.discount.value)/100:Number(s.discount.value));return console.log(a,s.discount),a-n}static calculateLineTotal(s){return l.calculateRealPrice(s)*s.quantity}static calculateCartTotal(s){return s.reduce((a,n)=>{const r=l.calculateLineTotal(n);return a+r},0)}static calculateCartDiscount(s){return s.reduce((a,n)=>{const r=n.discount.type==="percent"?n.price*n.discount.value/100:n.discount.value;return a+r},0)}}const L=({item:t,onRemove:s})=>{const{trans:a}=i.useContext(m);return e.jsx(g,{to:`/order/product/${t.productId}`,children:e.jsxs("article",{className:"flex w-full gap-4 p-4 transition-all border rounded-md lg:w-fit hover:shadow-md",children:[e.jsx("img",{className:"object-cover rounded-md",width:100,height:100,src:t.product.images[0],alt:t.product.name}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"font-semibold",children:t.product.name}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{children:o.toVND(l.calculateRealPrice(t))}),e.jsxs("span",{className:"ml-1 text-xs text-gray-500",children:["x",t.quantity]}),e.jsxs("span",{className:"font-semibold",children:[" ","= ",o.toVND(l.calculateLineTotal(t))]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{title:a({en:"Are you sure to delete this task?",vi:"Bạn có chắc chắn muốn xóa sản phẩm này không?"}),description:a({en:`Remove "${t.product.name}" from cart?`,vi:`Xóa "${t.product.name}" khỏi giỏ hàng?`}),okButtonProps:{danger:!0},okText:a({en:"Remove from cart",vi:"Xóa khỏi giỏ"}),cancelText:a({en:"Cancel",vi:"Hủy"}),onPopupClick:n=>{n.preventDefault()},onConfirm:s,children:e.jsx(x,{size:"small",shape:"round",className:"ml-auto",danger:!0,onClick:n=>n.preventDefault(),icon:e.jsx(w,{})})})})]})]})},t.productId)},X=()=>{const{cart:t,removeItemFromCart:s}=i.useContext(v),[a,n]=N.useState(!1),{trans:r}=i.useContext(m),{user:p}=i.useContext(b),[,h]=u.useMessage(),f=()=>{u.info(r({en:"This feature is not available yet",vi:"Chức năng này chưa khả dụng"}))};if(!p)return e.jsx("div",{className:"flex items-start justify-center h-screen mt-8",children:e.jsx("h1",{className:"text-xl font-bold text-center",children:r({en:"Please login to view your cart",vi:"Vui lòng đăng nhập để xem giỏ hàng của bạn"})})});const d=l.calculateCartDiscount(t);return e.jsxs("div",{children:[h,e.jsx("div",{className:"max-w-screen-xl px-2 mx-auto mb-8",children:e.jsxs(y.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"grid grid-cols-8 gap-8 mt-8",children:[e.jsxs("div",{className:"p-4 pb-8 border rounded-md col-span-full lg:col-span-5 h-fit",children:[e.jsxs("h1",{className:"mt-4 mb-4 text-xl font-bold text-center font-display",children:[e.jsx(T,{className:"mr-2 text-2xl font-bold"}),r({en:"Your Cart",vi:"Giỏ hàng của bạn"})]}),e.jsxs("div",{className:"flex flex-col flex-wrap gap-2 lg:flex-row",children:[(!t||t.length===0)&&e.jsx("div",{className:"grid w-full place-items-center",children:e.jsx(k,{description:r({en:"Your cart is empty",vi:"Giỏ hàng của bạn trống"})})}),t.map(c=>e.jsx(L,{item:c,onRemove:()=>{s(c,c.quantity),n(!a)}}))]})]}),e.jsxs("div",{className:"p-4 border rounded-md col-span-full lg:col-span-3 h-fit",children:[e.jsx("h2",{className:"text-2xl font-bold text-center underline ",children:r({en:"Order Summary",vi:"Tóm tắt đơn hàng"})}),e.jsxs("div",{className:"mt-2",children:[t.map((c,j)=>e.jsxs("div",{className:"flex justify-between overflow-auto",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-wrap",children:[j+1," ",". ",c.product.name," ",e.jsxs("b",{className:"text-lg text-gray-600",children:[" ","x ",c.quantity]})]})}),e.jsx("p",{className:"font-semibold",children:o.toVND(l.calculateLineTotal(c))})]},c.productId)),e.jsx(D,{}),d!=0&&e.jsxs("div",{className:"flex justify-between text-md",children:[e.jsxs("p",{children:[r({en:"Total amount reduced",vi:"Tổng tiền giảm"}),":"]}),e.jsxs("p",{className:"text-green-400 font-semibol",children:["-",o.toVND(d)]})]}),e.jsxs("div",{className:"flex items-end justify-between mt-4 text-2xl",children:[e.jsx("b",{children:r({en:"Total",vi:"Tổng tiền"})}),e.jsx("p",{className:"font-bold text-primary ",children:o.toVND(l.calculateCartTotal(t))})]}),e.jsx(x,{block:!0,type:"primary",size:"large",className:"mt-4 font-semibold tracking-widest uppercase bg-primary",onClick:f,disabled:t.length===0,children:r({en:"Checkout",vi:"Thanh toán"})})]})]})]})})]})};export{X as default};
